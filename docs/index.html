<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>JODA ‚Ä¢ Buy & Stake (Testnet)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="./JODALogo.png">
  <link rel="stylesheet" href="./styles.css">
  <script defer src="https://cdn.jsdelivr.net/npm/ethers@6.13.0/dist/ethers.min.js"></script>
  <script defer src="./app.js"></script>
</head>
<body class="theme-dark">
  <header class="topbar">
    <div class="brand">
      <img src="./JODALogo.png" alt="JODA" class="logo">
      <div class="titles">
        <h1>JODA</h1>
        <p class="subtitle">Buy & Stake ‚Ä¢ BSC Testnet</p>
      </div>
    </div>
    <div class="actions">
      <button id="themeBtn" class="ghost" title="Toggle theme">üåì</button>
      <button id="connectBtn" class="primary">Connect Wallet</button>
      <button id="disconnectBtn" class="ghost" style="display:none">Disconnect</button>
    </div>
  </header>

  <div id="status" class="status muted">Connecting‚Ä¶</div>

  <!-- Tabs -->
  <nav class="tabs">
    <button id="tabBuy" class="active">Buy</button>
    <button id="tabStake">Stake</button>
    <button id="tabContracts" class="ghost">Contracts</button>
    <button id="tabAffiliate" class="ghost">Affiliate</button>
  </nav>

  <!-- Quick badges row -->
  <section class="chips">
    <div class="chip" id="netBadge">‚Äî</div>
    <div class="chip ok" id="mmBadge">MetaMask</div>
    <div class="chip" id="walletShort">‚Äî</div>
  </section>

  <!-- BUY -->
  <section id="buyTab" class="panel">
    <div class="grid two">
      <div class="card">
        <h3>Sale Status</h3>
        <div class="row"><div>Sale Active:</div><div id="saleActive">‚Äî</div></div>
        <div class="row"><div>Min Buy (BNB):</div><div id="minBuyBnb">‚Äî</div></div>
        <div class="row"><div>Tokens per 1 BNB:</div><div id="tokensPerBnbHuman">‚Äî</div></div>
        <div class="row"><div>Available (JODA):</div><div id="availableTokens">‚Äî</div></div>
      </div>
      <div class="card">
        <h3>Your Balances</h3>
        <div class="row"><div>BNB:</div><div id="bnbBal">‚Äî</div></div>
        <div class="row"><div>JODA:</div><div id="jodaBal">‚Äî</div></div>
        <p class="small muted">Auto-refreshes periodically.</p>
      </div>
    </div>

    <div class="card">
      <h3>Buy JODA</h3>
      <div class="form">
        <label for="buyBnb">BNB to spend</label>
        <input id="buyBnb" inputmode="decimal" placeholder="e.g. 0.10">
        <button id="buyBtn" class="primary">Buy</button>
      </div>
      <p class="tiny muted">
        ‚Ä¢ Min buy enforced by contract ‚Ä¢ Tokens sent after tx confirmation ‚Ä¢
        BNB goes to treasury wallet on-chain.
      </p>
    </div>
  </section>

  <!-- STAKE -->
  <section id="stakeTab" class="panel" style="display:none">
    <div class="grid two">
      <div class="card">
        <h3>Stake JODA</h3>
        <div class="form">
          <label for="stakeAmt">Amount (JODA)</label>
          <input id="stakeAmt" inputmode="decimal" placeholder="e.g. 100">
        </div>
        <div class="form">
          <label for="stakeMonths">Months</label>
          <select id="stakeMonths">
            <option value="3">3</option>
            <option value="6">6</option>
            <option value="12">12</option>
          </select>
        </div>
        <div class="actions-inline">
          <button id="approveBtn" class="ghost">Approve</button>
          <button id="stakeBtn" class="primary">Stake</button>
        </div>
        <div id="stakeMsg" class="small muted"></div>
      </div>

      <div class="card">
        <h3>Your Stakes</h3>
        <div id="stakeList" class="small">No stakes yet.</div>
      </div>
    </div>
  </section>

  <!-- CONTRACTS (collapsible content controlled via tab) -->
  <section id="contractsTab" class="panel" style="display:none">
    <div class="card">
      <h3>Contracts (Testnet)</h3>
      <div class="addrgrid">
        <div>
          <div class="muted tiny">Token</div>
          <div class="addr">
            <span id="tokenAddrShort">‚Äî</span>
            <button class="copy" data-copy="#tokenAddrFull">Copy</button>
          </div>
          <input id="tokenAddrFull" class="tiny mono" readonly>
        </div>
        <div>
          <div class="muted tiny">Sale</div>
          <div class="addr">
            <span id="saleAddrShort">‚Äî</span>
            <button class="copy" data-copy="#saleAddrFull">Copy</button>
          </div>
          <input id="saleAddrFull" class="tiny mono" readonly>
        </div>
        <div>
          <div class="muted tiny">Staking</div>
          <div class="addr">
            <span id="stakeAddrShort">‚Äî</span>
            <button class="copy" data-copy="#stakeAddrFull">Copy</button>
          </div>
          <input id="stakeAddrFull" class="tiny mono" readonly>
        </div>
      </div>
      <p class="tiny muted">Tip: Use the copy buttons for exact addresses.</p>
    </div>
  </section>

  <!-- AFFILIATE -->
  <section id="affiliateTab" class="panel" style="display:none">
    <div class="card">
      <h3>Affiliate</h3>
      <p class="small">Share your unique link. When someone visits with your code, we show ‚ÄúReferred by ‚Ä¶‚Äù on the site.</p>
      <div class="form">
        <label for="affLink">Your link</label>
        <input id="affLink" class="mono" readonly>
        <button id="copyAff" class="ghost">Copy</button>
      </div>
      <div id="refNotice" class="pill" style="display:none"></div>
    </div>
  </section>

  <div id="toast"></div>
</body>
</html>
