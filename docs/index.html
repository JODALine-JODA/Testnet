<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JODA • Buy & Stake (Testnet)</title>
  <link rel="stylesheet" href="./styles.css">
  <script type="module" src="https://cdn.jsdelivr.net/npm/ethers@6.13.0/dist/ethers.min.js"></script>
  <script type="module" src="./app.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="./JODALogo.png" alt="JODA" class="logo">
      <div>
        <h1>JODA</h1>
        <p class="muted">Buy & Stake • BSC Testnet</p>
      </div>
    </div>

    <div class="wallet-controls">
      <span id="status" class="muted">Connecting…</span>
      <button id="connectBtn" class="btn">Connect Wallet</button>
      <button id="disconnectBtn" class="btn outline" style="display:none;">Disconnect</button>
    </div>
  </header>

  <main class="container">
    <!-- Addresses row -->
    <section class="row addr-row">
      <div class="addr">
        <div class="label">Your wallet</div>
        <div class="value" id="addrUser">—</div>
        <button class="pill" data-copy="#addrUser">Copy</button>
      </div>
      <div class="addr">
        <div class="label">Sale</div>
        <div class="value" id="addrSale">—</div>
        <button class="pill" data-copy="#addrSale">Copy</button>
      </div>
      <div class="addr">
        <div class="label">Staking</div>
        <div class="value" id="addrStaking">—</div>
        <button class="pill" data-copy="#addrStaking">Copy</button>
      </div>
    </section>

    <!-- Tabs -->
    <nav class="tabs">
      <button class="tab active" data-tab="buyTab">Buy</button>
      <button class="tab" data-tab="stakeTab">Stake</button>
      <button class="tab" data-tab="contractsTab">Contracts</button>
      <button class="tab" data-tab="affiliateTab">Affiliate</button>
    </nav>

    <!-- BUY -->
    <section id="buyTab" class="tabpane show">
      <div class="grid two">
        <div class="card">
          <h3>Sale Status</h3>
          <div class="row"><div>Sale Active:</div><div id="saleActive">—</div></div>
          <div class="row"><div>Min Buy (BNB):</div><div id="minBuy">—</div></div>
          <div class="row"><div>Tokens per 1 BNB:</div><div id="tknPerBnb">—</div></div>
          <div class="row"><div>Available (JODA):</div><div id="available">—</div></div>
        </div>

        <div class="card">
          <h3>Your Balances</h3>
          <div class="row"><div>BNB:</div><div id="balBNB">—</div></div>
          <div class="row"><div>JODA:</div><div id="balJODA">—</div></div>
          <div class="small muted">Auto-refresh every 20s</div>
        </div>
      </div>

      <div class="card">
        <h3>Buy JODA</h3>
        <label>BNB to spend (min shown above)</label>
        <div class="inline">
          <input id="bnbToSpend" type="number" min="0" step="0.01" placeholder="e.g. 0.10">
          <button id="buyBtn" class="btn">Buy</button>
        </div>
        <p class="small muted">
          • Min buy enforced by contract • Tokens arrive after confirmation • BNB goes to the treasury wallet on-chain.
        </p>
      </div>
    </section>

    <!-- STAKE -->
    <section id="stakeTab" class="tabpane">
      <div class="grid two">
        <div class="card">
          <h3>Stake JODA</h3>
          <label>Amount (JODA)</label>
          <input id="stakeAmount" type="number" min="0" step="1" placeholder="e.g. 100">
          <label>Months</label>
          <select id="stakeMonths">
            <option value="3">3</option>
            <option value="6">6</option>
            <option value="12">12</option>
          </select>
          <div class="inline">
            <button id="approveBtn" class="btn outline">Approve</button>
            <button id="stakeBtn" class="btn">Stake</button>
          </div>
          <div id="stakeMsg" class="small muted"></div>
        </div>

        <div class="card">
          <h3>Your Stakes</h3>
          <div id="stakeList" class="small">No stakes yet.</div>
        </div>
      </div>
    </section>

    <!-- CONTRACTS -->
    <section id="contractsTab" class="tabpane">
      <div class="card">
        <h3>Contracts</h3>
        <ul class="mono small">
          <li>Token: <span id="cToken">—</span></li>
          <li>Sale: <span id="cSale">—</span></li>
          <li>Staking: <span id="cStaking">—</span></li>
        </ul>
      </div>
    </section>

    <!-- AFFILIATE -->
    <section id="affiliateTab" class="tabpane">
      <div class="card">
        <h3>Affiliate link</h3>
        <p class="small muted">Share this link. If someone buys with your link, you get credit (off-chain tracking).</p>
        <input id="affLink" class="mono" readonly>
        <div class="inline">
          <button id="copyAff" class="btn">Copy</button>
          <a id="openAff" class="btn outline" target="_blank" rel="noopener">Open</a>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer small muted">
    <span id="toast" class="toast" style="display:none;"></span>
  </footer>
</body>
</html>
