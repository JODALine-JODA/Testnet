<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JODA • Buy & Earn Back (BSC Testnet)</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- ethers v6 (used by your existing app.js) -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.13.0/dist/ethers.min.js" defer></script>
  <!-- your working logic file (unchanged) -->
  <script src="app.js" type="module" defer></script>
</head>
<body>

  <!-- NAV -->
  <header class="nav">
    <div class="nav__left">
      <img src="JODALogo.png" class="logo" alt="JODA" />
      <div class="brand">
        <strong>JODA</strong>
        <span>Buy & Earn Back • BSC Testnet</span>
      </div>
    </div>
    <nav class="nav__links">
      <div class="dropdown">
        <button class="dropbtn">Learn ▾</button>
        <div class="dropdown__menu">
          <a href="#how">How it works</a>
          <a href="#tokenomics">Tokenomics</a>
          <a href="#roadmap">Roadmap</a>
          <a href="#vision">Our Vision</a>
          <a href="#faq">FAQ</a>
        </div>
      </div>
      <div class="dropdown">
        <button class="dropbtn">Build ▾</button>
        <div class="dropdown__menu">
          <a href="#partners">Partners</a>
          <a href="#contracts">Contracts</a>
          <a href="#blog">Blog</a>
          <a href="#mainnet">Mainnet</a>
        </div>
      </div>
    </nav>
    <div class="nav__right">
      <span id="status" class="status">Connecting…</span>
      <button id="connectBtn" class="btn btn--ghost">Connect Wallet</button>
      <button id="disconnectBtn" class="btn btn--ghost hide">Disconnect</button>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <h1>Shop online • Get JODA back</h1>
    <p class="muted">
      Use JODA’s shopping links and keep a share of the value you create.  
      It’s your spend — earn a little back in JODA.
    </p>
    <div class="hero__chips">
      <span class="chip">Simple</span>
      <span class="chip">Non-custodial</span>
      <span class="chip">On-chain</span>
    </div>
  </section>

  <!-- STEP 1: EARN ON PURCHASES -->
  <section id="how" class="section">
    <h2 class="section__title">Step 1 — Earn JODA when you shop</h2>

    <div class="grid grid--2">
      <div class="card">
        <h3>Your personal link</h3>
        <p class="muted">
          Share your link or shop through it to earn JODA on supported stores.
        </p>
        <label class="label">Your referral tag (wallet)</label>
        <div class="row">
          <input id="walletAddress" class="input mono" placeholder="—" readonly />
          <button class="btn btn--ghost" onclick="navigator.clipboard.writeText(document.getElementById('walletAddress').value)">Copy</button>
        </div>

        <label class="label">Shopping link preview</label>
        <div class="row">
          <input id="shopLink" class="input mono" value="https://buy.joda.link/?ref=" readonly />
          <button class="btn btn--ghost" onclick="navigator.clipboard.writeText(document.getElementById('shopLink').value)">Copy</button>
        </div>
        <p class="small muted">
          We’ll activate stores progressively. Earnings settle in JODA on-chain.
        </p>
      </div>

      <div class="card">
        <h3>How it works</h3>
        <ul class="bullets">
          <li>Connect wallet — get your unique tag.</li>
          <li>Shop with our links, or share with friends.</li>
          <li>When a purchase clears, JODA is delivered to your wallet.</li>
        </ul>
        <div class="stores">
          <span class="pill">Popular Stores</span>
          <div class="storeGrid">
            <a href="#" class="store">Store A</a>
            <a href="#" class="store">Store B</a>
            <a href="#" class="store">Store C</a>
            <a href="#" class="store">Store D</a>
          </div>
          <p class="small muted">More stores coming soon.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- STEP 2: BUY -->
  <section class="section">
    <h2 class="section__title">Step 2 — Buy JODA</h2>

    <div class="grid grid--2" id="livePanels">
      <div class="card">
        <h3>Sale Status</h3>
        <div class="kv">
          <div>Sale Active:</div><div id="saleActive">—</div>
          <div>Min Buy (BNB):</div><div id="minBuy">—</div>
          <div>Tokens per 1 BNB:</div><div id="tokensPerBNB">—</div>
          <div>Available (JODA):</div><div id="availableTokens">—</div>
        </div>
      </div>

      <div class="card">
        <h3>Your Balances</h3>
        <div class="kv">
          <div>BNB:</div><div id="userBNB">—</div>
          <div>JODA:</div><div id="userJODA">—</div>
        </div>
        <p class="small muted">Auto-refreshes every ~20s.</p>
      </div>
    </div>

    <div class="card card--wide">
      <h3>Buy JODA</h3>
      <div class="row">
        <input id="buyBNB" class="input mono" placeholder="e.g. 0.10" />
        <button id="buyBtn" class="btn">Buy</button>
      </div>
      <p class="small muted">• Min buy enforced by contract • Tokens arrive after confirmation • BNB goes to treasury wallet on-chain.</p>
    </div>
  </section>

  <!-- STEP 3: STAKE -->
  <section class="section" id="stake">
    <h2 class="section__title">Step 3 — Stake JODA</h2>

    <div class="grid grid--2">
      <div class="card">
        <h3>Stake JODA</h3>
        <label class="label">Amount (JODA)</label>
        <input id="stakeAmount" class="input mono" placeholder="e.g. 100" />

        <label class="label">Months</label>
        <select id="stakeMonths" class="input">
          <option value="3">3</option>
          <option value="6">6</option>
          <option value="12">12</option>
        </select>

        <div class="row">
          <button id="approveBtn" class="btn btn--ghost">Approve</button>
          <button id="stakeBtn" class="btn">Stake</button>
        </div>
        <p id="stakeMsg" class="small muted"></p>
      </div>

      <div class="card">
        <h3>Your Stakes</h3>
        <div id="stakeList" class="small muted">No stakes yet.</div>
      </div>
    </div>
  </section>

  <!-- CONTRACTS / INFO -->
  <section class="section" id="contracts">
    <h2 class="section__title">Contracts</h2>
    <div class="grid grid--3">
      <div class="card">
        <h4>Your wallet</h4>
        <div class="row">
          <input id="yourWallet" class="input mono" placeholder="—" readonly />
          <button class="btn btn--ghost" onclick="navigator.clipboard.writeText(document.getElementById('yourWallet').value)">Copy</button>
        </div>
      </div>

      <div class="card">
        <h4>Sale</h4>
        <div class="row">
          <input id="saleAddress" class="input mono" placeholder="—" readonly />
          <button class="btn btn--ghost" onclick="navigator.clipboard.writeText(document.getElementById('saleAddress').value)">Copy</button>
        </div>
      </div>

      <div class="card">
        <h4>Staking</h4>
        <div class="row">
          <input id="stakingAddress" class="input mono" placeholder="—" readonly />
          <button class="btn btn--ghost" onclick="navigator.clipboard.writeText(document.getElementById('stakingAddress').value)">Copy</button>
        </div>
      </div>
    </div>
  </section>

  <!-- PLACEHOLDERS (for menu anchors) -->
  <section id="tokenomics" class="section slim"><h2 class="section__title">Tokenomics</h2><p class="muted">Coming soon.</p></section>
  <section id="roadmap" class="section slim"><h2 class="section__title">Roadmap</h2><p class="muted">Coming soon.</p></section>
  <section id="vision" class="section slim"><h2 class="section__title">Our Vision</h2><p class="muted">Coming soon.</p></section>
  <section id="partners" class="section slim"><h2 class="section__title">Partners</h2><p class="muted">Coming soon.</p></section>
  <section id="faq" class="section slim"><h2 class="section__title">FAQ</h2><p class="muted">Coming soon.</p></section>
  <section id="blog" class="section slim"><h2 class="section__title">Blog</h2><p class="muted">Coming soon.</p></section>
  <section id="mainnet" class="section slim"><h2 class="section__title">Mainnet</h2><p class="muted">Coming soon.</p></section>

  <footer class="footer">
    <span>© JODA. All rights reserved.</span>
    <span class="muted small">Testnet preview • Not financial advice.</span>
  </footer>

  <!-- Small inline helper to sync the “shop link” once wallet shows -->
  <script>
    const shopEl = document.getElementById('shopLink');
    const walEl  = document.getElementById('walletAddress');
    const yourEl = document.getElementById('yourWallet');

    const syncShopLink = () => {
      const tag = walEl?.value || yourEl?.value || '';
      if (tag) shopEl.value = `https://buy.joda.link/?ref=${tag}`;
    };
    // Try a few times in case app.js sets wallet later
    setInterval(syncShopLink, 1000);
  </script>
</body>
</html>
